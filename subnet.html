<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>ماشین حساب سابنت</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container glass">
    <img src="logo.png" alt="لوگو" class="logo">
    <h2>ماشین حساب سابنت</h2>
    <label>IP آدرس:</label>
    <input type="text" id="ip" value="192.168.1.50">
    <label>Subnet Mask (CIDR):</label>
    <input type="number" id="cidr" value="24" min="1" max="32">
    <button onclick="calculate()">محاسبه کن</button>
    <div class="result" id="output"></div>
  </div>

  <script>
    function ipToInt(ip) {
      return ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0);
    }

    function intToIp(int) {
      return [(int >>> 24) & 255, (int >>> 16) & 255, (int >>> 8) & 255, int & 255].join('.');
    }

    function calculate() {
      const ip = document.getElementById("ip").value;
      const cidr = parseInt(document.getElementById("cidr").value);
      const ipInt = ipToInt(ip);
      const mask = cidr === 0 ? 0 : (~0 << (32 - cidr)) >>> 0;
      const network = ipInt & mask;
      const broadcast = network | (~mask >>> 0);
      const firstHost = cidr === 32 ? network : network + 1;
      const lastHost = cidr >= 31 ? broadcast : broadcast - 1;
      const hostCount = cidr >= 31 ? 0 : lastHost - firstHost + 1;

      document.getElementById("output").innerHTML = `
        <table>
          <tr><th>پارامتر</th><th>مقدار</th></tr>
          <tr><td>آدرس شبکه</td><td>${intToIp(network)}</td></tr>
          <tr><td>ماسک</td><td>${intToIp(mask)} /${cidr}</td></tr>
          <tr><td>Broadcast</td><td>${intToIp(broadcast)}</td></tr>
          <tr><td>اولین هاست</td><td>${intToIp(firstHost)}</td></tr>
          <tr><td>آخرین هاست</td><td>${intToIp(lastHost)}</td></tr>
          <tr><td>تعداد هاست</td><td>${hostCount}</td></tr>
        </table>
      `;
    }
  </script>
</body>
</html>
